# v2.0.0 Release Notes

## General

* API documentation for the Core assembly
* Adopted C# 6 conventions


## Queues

* Added the _Task ExtendLeaseAsync(IQueueItem<T> queueItem)_ method to IAsynchronousQueue
* The Azure brokered message queue implementation of the IAsynchronousQueue method _Task ExtendLeaseAsync(IQueueItem<T> queueItem, TimeSpan visibilityTimeout)_ now throws a NotSupportedException due to the Service Bus lack of implementation of a per extension visibility timeout (it extends by the fixed visibility on the queue definition).
* The Azure brokered message queue implementation of the IQueue method _void ExtendLease(IQueueItem<T> queueItem, TimeSpan visibilityTimeout)_ now throws a NotSupportedException due to the Service Bus lack of implementation of a per extension visibility timeout (it extends by the fixed visibility on the queue definition).
* Removed the Create*BrokeredMessageQueue methods from IQueueFactory as they were their only to support mutliple vendor provided variants (Azure). Their is now an IAzureQueueFactory that derives from IQueueFactory and implements these methods.
* Removed the Get*BrokeredMessageQueue methods from IApplicationResourceFactory and added them to IAzureApplicationResourceFactory.
* Renamed Receive to ReceiveAsync on IAsynchronousSubscription

## Topics and Subscriptions

* Added the GetAsyncSubscription<T>(string subscriptionName, string topicName, IComponentIdentity componentIdentity) method to the application resource factory

## Unit Of Work and Repository Pattern

* Renamed OptimisticRepositoryWinsUpdate to OptimisticRepositoryWinsUpdateAsync
* Moved the ExecuteAsync and SuspectExecutionPolicy methods from IUnitOfWorkAsync to IEntityFrameworkUnitOfWorkAsync as they are implementation specific
* Moved the Execute and SuspectExecutionPolicy methods from IUnitOfWork to IEntityFrameworkUnitOfWork as they are implementation specific
* IEntityFrameWorkUnitOfWorkAsync and IEntityFrameworkUnitOfWork interfaces can be obtained by casting the IUnitOfWorkAsync and IUnitOfWork interfaces returned from constructors when the EntityFramework repository NuGet package is being used. In practice the functionality now on these interfaces has been used rarely and so this feels the right way to do this (rather than burdening with more construction methods across the system).
* The GetRepositoryAsync method of IUnitOfWorkAsync has been deprecated and will be removed in the next verison. GetRepository should be used instead.

## Email

* All Send methods on IEmailManager now renamed to SendAsync
* IEmailManager is now obsolete and will be removed in the next major version - their is a equivelant IEmailQueueDispatcher introduced as a replacement
* The Send method on IEMailProvider has been renamed to SendAsync

## Alerts

* Renamed the Send method of IAlertSender to SendAsync

## Backoff Processors

* Renamed Start to StartAsync on BackoffQueueProcessor and BackoffSubscriptionProcessor
* Renamed HandleRecievedItem to HandleRecievedItemAsync on BackoffQueueProcessor and BackoffSubscriptionProcessor

## Hostable components

* The Start method has been renamed to StartAsync on IHostableComponent

## Blobs

* The non-async blob methods on IAsynchronousBlockBlobRepository are now obsolete and will be removed on the next major version

## Policies

* ILeaseManager moved from the namespace AccidentalFish.ApplicationSupport.Core.NoSql to AccidentalFish.ApplicationSupport.Core.Policies
* The Execute methods on IAsynchronousBackoffPolicy have been renamed to ExecuteAsync
* All the Retry methods on ILeasedRetry have had Async added as a postfix
* All methods on ILeaseManager have had Async added as a postfix
* Renamed CreateIfNotExists to CreateIfNotExistsAsync on IResourceCreator

## Logger

* The Logger method on ILoggerExtension has been renamed to BeforeLog and this now returns a boolean giving the extension an oppurtunity to prevent the logger from actually logging the item.
* All methods on ILogger have been postfixed with Async (so Debug becomes DebugAsync)

## Bug Fixes

Azure non-async blob implementations now correctly non-async.